---
layout: post
title: 对Hibernate中数据关联项的inverse和cascade字段的理解
categories:
- 技艺
tags: []
published: true
comments: true
---
<p>初学者经常混淆inverse和cascade。实际上，这是两个互不相关的概念。<br />
inverse指的是关联关系的控制方向,而cascade指的是层级之间的连锁操作。<br />
<br />
我是在部署数据的双向一对多的时候想到的下面这些：<br />
<br />
1。主控只能有一个：<br />
首先inverse决定主控与被控的关系，这里要注意只能是一边控制另一边，<br />
因为如果是互相控制的话就会造成死循环。（谁都不控制你还要orm干啥。。。）<br />
<br />
2。cascade字段仅在主控方有效力：<br />
然后cascade(关联操作)只在主控方才有效，被控方即使设了cascade也没用。<br />
也就是是由主控方来维护的cascade操作。<br />
<br />
3。双向关联在关联操作上的控制还是单向：<br />
所以双向关联只是在映射文件上有互相关联的关系，而在操作上还是单向的。<br />
我们引入双向关联只是为了将主控权交给多方，来提高性能（这一点我后面解释）<br />
，并可以避免约束违例（外键null的问题）。<br />
<br />
4。都是单向控制，多方控制时却要使用双向关联的原因：<br />
写到这里的时候我自己也产生了另一个疑问，只是主控权的问题嘛，完全可以将像<br />
one-to-many那样把inverse设为false就获得主控权了嘛。难道是设计的错误？<br />
经过核实我发现原来many-to-one原来没有inverse字段，所以只能通过设置one-to-many的<br />
inverse字段间接使多方获得主控权。<br />
<br />
5。多方控制效率高：（这点是我个人理解）<br />
多方只对应一个单方，级联操作的时候，相关项少，操作快。<br />
而单方对应多个多方，级联操作，相关项多，操作慢。<br />
<br />
但我仍然有一个问题：<br />
现在主要的问题为什么要这样设计？而不能在many-to-one中直接提供inverse字段，使多方获得主控权。</p>
